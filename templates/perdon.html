<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PerdÃ³n</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #fff0f5;
      font-family: 'Poppins', sans-serif;
      color: #b30059;
      padding: 20px;
      text-align: center;
    }

    h3 {
      font-size: 2em;
      margin-bottom: 15px;
    }

    #typedText {
      font-size: 1.1em;
      max-width: 800px;
      margin: auto;
      line-height: 1.7;
      white-space: pre-line;
    }

    a {
      color: #ff69b4;
      text-decoration: none;
      font-weight: bold;
    }

    a:hover {
      text-decoration: underline;
    }

    canvas {
      display: block;
      margin: 40px auto;
      background-color: black;
      border-radius: 20px;
      max-width: 100%;
      height: auto;
    }

    #loveBtn {
      margin-top: 30px;
      padding: 12px 25px;
      background-color: #ff69b4;
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 1.1em;
      cursor: pointer;
      transition: 0.3s;
    }

    #loveBtn:hover {
      background-color: #e055a2;
    }

    .heart-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 100px;
      animation: heartbeat 1s infinite;
      opacity: 0;
      pointer-events: none;
    }

    @keyframes heartbeat {
      0%, 100% {
        transform: translate(-50%, -50%) scale(1);
      }
      50% {
        transform: translate(-50%, -50%) scale(1.2);
      }
    }

    .show-heart {
      opacity: 1;
      transition: opacity 0.5s ease;
    }
  </style>
</head>
<body>
  <!-- El audio ahora se reproduce solo cuando se hace clic en el botÃ³n -->
  <audio id="heartbeatSound" src="../static/audios/erestu.mp3" loop></audio>

  <section>
    <article>
      <h3>ğŸ’Œ Quiero decirte cuÃ¡nto te amo ğŸ’–</h3>
      <p id="typedText"></p>
      <button id="loveBtn">ğŸ’Œ Â¿AÃºn me amas? Haz clic aquÃ­</button>
    </article>
  </section>
 
  <div class="heart-popup" id="bigHeart">â¤ï¸</div>

  <canvas id="heartCanvas"></canvas>

  <script>
    const fullText = `Siempre me dices que no te amo aunque sÃ­ lo hago y eso no va a cambiar ğŸ¥ºâ¤ï¸
  No quiero separarme de ti, eres el amor de mi vida ğŸ’˜
  
  SÃ© que siempre hemos tenido problemas ğŸ˜¢ algunos nos enojamos mÃ¡s que otras veces,
  pero a pesar de todo yo te sigo amando ğŸ¥° no te quiero perder nuevamente ğŸ˜”
  
  Ahorita estÃ¡s enojada porque me querÃ­a ir el otro dÃ­a, y tal vez tienes razÃ³n...
  Estoy mal, pero debes entender que por primera vez me estÃ¡ empezando a gustar algo ğŸ§ ğŸ’¡
  
  TÃº bien sabes y te he dicho que siempre me gusta algo, por ejemplo el gym ğŸ‹ï¸â€â™‚ï¸
  Hubo un tiempo que me gustÃ³ mucho, tuve un buen fÃ­sico ğŸ’ª y al final ya no le echÃ© tantas ganas...
  
  Siempre pasa eso ğŸ˜• hay algo que me gusta pero no es algo que me apasione ğŸ”„
  
  TambiÃ©n ya te he contado: antes querÃ­a ser arquitecto ğŸ›ï¸ y me gustaba eso.
  He querido ser muchas cosas y siempre las dejo porque al final no son algo que quiera mucho ğŸ¤·â€â™‚ï¸
  
  Y ahora estoy con lo de la programaciÃ³n ğŸ’» me gusta ver y saber cÃ³mo funcionan las cosas ğŸ”
  
  Y no sÃ© cuÃ¡nto me dure el gusto por esto... pero me gustarÃ­a que entendieras y que me apoyes ğŸ¥¹
  
  Muchas veces quiero hablarte de esto, pero siento que no me haces mucho caso ğŸ˜¶â€ğŸŒ«ï¸
  Y al final ya ni te digo nada ğŸ˜
  
  A veces siento que te enojas rÃ¡pido ğŸ˜¡ y cuando te lo digo tambiÃ©n te enojas ğŸ™ƒ
  
  Pero es que yo me tomo muchas cosas a juego ğŸ­ y siento que eso es lo que te molesta ğŸ˜”
  
  Yo te amo mucho y no sabes cuÃ¡nto ğŸ’—
  
  Siempre me preguntas ğŸ‘‰ <a href="/pqteamo">Â¿POR QUÃ‰ TE AMO?</a> y no sÃ© cÃ³mo decirte lo mucho que te amo ğŸ˜³
  
  Me da vergÃ¼enza, a pesar de que ya somos novios ğŸ«¶ğŸ’‘
  
  Tampoco te he dicho ğŸ‘‰ <a href="/pqmgustas">Â¿POR QUÃ‰ ME GUSTAS?</a> 
  Ni ğŸ‘‰ <a href="/qmemolesta">Â¿QUÃ‰ ME MOLESTA DE TI?</a>
  
  Hago esto para que veas que, aunque digas que no te amo, sÃ­ lo hago ğŸ’–
  
  Solo estoy intentando buscar mi manera de demostrÃ¡rtelo... y esta es una:
  âœ¨ Haciendo algo que me gusta, para ti ğŸ«°ğŸ’` ;

    const element = document.getElementById('typedText');
    let i = 0;
  
    function typeWriter() {
      if (i < fullText.length) {
        if (fullText.substr(i, 3) === "<a ") {
          let end = fullText.indexOf("</a>", i) + 4;
          element.innerHTML += fullText.substring(i, end);
          i = end;
        } else {
          element.innerHTML += fullText.charAt(i) === '\n' ? '<br>' : fullText.charAt(i);
          i++;
        }
        setTimeout(typeWriter, 25);
      }
    }
  
    typeWriter();
  
    const loveBtn = document.getElementById('loveBtn');
    const bigHeart = document.getElementById('bigHeart');
    const heartbeatSound = document.getElementById('heartbeatSound');
  
    loveBtn.addEventListener('click', () => {
      // Inicia la reproducciÃ³n de audio al hacer clic
      heartbeatSound.currentTime = 0;
      heartbeatSound.play();
      bigHeart.classList.add('show-heart');
      setTimeout(() => {
        bigHeart.classList.remove('show-heart');
      }, 3000);
    });
  
    const canvas = document.getElementById('heartCanvas');
    const ctx = canvas.getContext('2d');
  
    function heartX(k) {
      return 15 * Math.pow(Math.sin(k), 3);
    }
  
    function heartY(k) {
      return 12 * Math.cos(k) - 5 * Math.cos(2 * k) - 2 * Math.cos(3 * k) - Math.cos(4 * k);
    }
  
    function resizeCanvas() {
      canvas.width = window.innerWidth * 0.8;
      canvas.height = window.innerHeight * 0.5;
      drawHeart();
    }
  
    let points = [];
    for (let i = 0; i <= 600; i++) {
      let k = i * 0.05;
      points.push({ x: heartX(k), y: heartY(k) });
    }
  
    function drawHeart() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath();
      ctx.strokeStyle = 'red';
      ctx.lineWidth = 2;
  
      let scale = canvas.width / 40;
      let offsetX = canvas.width / 2;
      let offsetY = canvas.height / 2;
  
      points.forEach((pt, i) => {
        let x = pt.x * scale + offsetX;
        let y = -pt.y * scale + offsetY;
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      });
  
      ctx.stroke();
    }
  
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
  </script>
  
</body>
</html>
